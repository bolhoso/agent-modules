# metrics/prometheus_receiver

The `metrics/prometheus_receiver` module is an example module which exports a
prometheus receiver for use by other components.

## Agent Version

`>= v0.34`

## Module arguments

The following arguments are supported when passing arguments to the module
loader:

| Name | Type | Description | Default | Required
| ---- | ---- | ----------- | ------- | --------
| `username` | `string` | The username for basic authentication. | | yes
| `password` | `string` | The password for basic authentication. | | yes
| `url`      | `string` | The target url to forward metrics to. | | yes

## Module exports

The following fields are exported by the module:

| Name | Type | Description
| ---- | ---- | -----------
| `receiver` | `receiver` | A value that other components can use to send metrics data to.

## Example

This example demonstrates how you can send all metrics generated by the Grafana
Agent to prometheus.

```river
module.git "metrics_prometheus_receiver" {
	repository = "https://github.com/grafana/agent-modules.git"
	revision   = "main"
	path       = "example/metrics/prometheus_receiver/module.river"

	arguments {
		username = env("METRIC_USERNAME")
		password = env("METRIC_PASSWORD")
		url      = env("METRIC_URL")
	}
}

prometheus.scrape "metrics_agent" {
	targets    = [{"__address__" = "0.0.0.0:12345"}]
	forward_to = [module.git.metrics_prometheus_receiver.exports.receiver]
}

```
